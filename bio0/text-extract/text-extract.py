# -*- coding: utf-8 -*-
# Author: Nisto
# Last revision: 2015, Jan 17


import os
import sys
import struct










cp_all = {
    0x00: "\x00", # string termination
    0x01: "\n",   # newline
    0x02: "",     # selection prompt
    0x03: "",     # color termination
    0x04: "",     # color (2 bytes)
    0x05: "",     # option (▶)
    0x06: "",     # text-continuation (▼)
    0x07: "",     # text-justify (2 bytes)

    # ideographic space (U+3000)
    0x08: "　",

    # digits
    0x09: "0", 0x0A: "1", 0x0B: "2", 0x0C: "3", 0x0D: "4",
    0x0E: "5", 0x0F: "6", 0x10: "7", 0x11: "8", 0x12: "9",

    # uppercase letters
    0x13: "A", 0x14: "B", 0x15: "C", 0x16: "D", 0x17: "E",
    0x18: "F", 0x19: "G", 0x1A: "H", 0x1B: "I", 0x1C: "J",
    0x1D: "K", 0x1E: "L", 0x1F: "M", 0x20: "N", 0x21: "O",
    0x22: "P", 0x23: "Q", 0x24: "R", 0x25: "S", 0x26: "T",
    0x27: "U", 0x28: "V", 0x29: "W", 0x2A: "X", 0x2B: "Y",
    0x2C: "Z",

    # lowercase letters
    0x2D: "a", 0x2E: "b", 0x2F: "c", 0x30: "d", 0x31: "e",
    0x32: "f", 0x33: "g", 0x34: "h", 0x35: "i", 0x36: "j",
    0x37: "k", 0x38: "l", 0x39: "m", 0x3A: "n", 0x3B: "o",
    0x3C: "p", 0x3D: "q", 0x3E: "r", 0x3F: "s", 0x40: "t",
    0x41: "u", 0x42: "v", 0x43: "w", 0x44: "x", 0x45: "y",
    0x46: "z",
}










cp_trial = {
    # hiragana
    #        a             i             u             e             o
    0x47:   "あ", 0x48:   "い", 0x49:   "う", 0x4A:   "え", 0x4B:   "お", # /
    0x4C:   "か", 0x4D:   "き", 0x4E:   "く", 0x4F:   "け", 0x50:   "こ", # k
    0x51:   "さ", 0x52:   "し", 0x53:   "す", 0x54:   "せ", 0x55:   "そ", # s
    0x56:   "た", 0x57:   "ち", 0x58:   "つ", 0x59:   "て", 0x5A:   "と", # t
    0x5B:   "な", 0x5C:   "に", 0x5D:   "ぬ", 0x5E:   "ね", 0x5F:   "の", # n
    0x6000: "は", 0x6001: "ひ", 0x6002: "ふ", 0x6003: "へ", 0x6004: "ほ", # h
    0x6005: "ま", 0x6006: "み", 0x6007: "む", 0x6008: "め", 0x6009: "も", # m
    0x600A: "や",               0x600B: "ゆ",               0x600C: "よ", # y
    0x600D: "ら", 0x600E: "り", 0x600F: "る", 0x6010: "れ", 0x6011: "ろ", # r
    0x6012: "わ",                                           0x6013: "を", # w
    0x6014: "ん",                                                         # "n"
    0x6015: "が", 0x6016: "ぎ", 0x6017: "ぐ", 0x6018: "げ", 0x6019: "ご", # g
    0x601A: "ざ", 0x601B: "じ", 0x601C: "ず", 0x601D: "ぜ", 0x601E: "ぞ", # z
    0x601F: "だ", 0x6020: "ぢ", 0x6021: "づ", 0x6022: "で", 0x6023: "ど", # d
    0x6024: "ば", 0x6025: "び", 0x6026: "ぶ", 0x6027: "べ", 0x6028: "ぼ", # b
    0x6029: "ぱ", 0x602A: "ぴ", 0x602B: "ぷ", 0x602C: "ぺ", 0x602D: "ぽ", # p

    # small hiragana
    0x602E: "ぁ", 0x602F: "ぃ", 0x6030: "ぅ", 0x6031: "ぇ", 0x6032: "ぉ",
                                0x6033: "っ",
    0x6034: "ゃ",               0x6035: "ゅ",               0x6036: "ょ",

    # katakana
    #        a             i             u             e             o
    0x6037: "ア", 0x6038: "イ", 0x6039: "ウ", 0x603A: "エ", 0x603B: "オ", # /
    0x603C: "カ", 0x603D: "キ", 0x603E: "ク", 0x603F: "ケ", 0x6040: "コ", # k
    0x6041: "サ", 0x6042: "シ", 0x6043: "ス", 0x6044: "セ", 0x6045: "ソ", # s
    0x6046: "タ", 0x6047: "チ", 0x6048: "ツ", 0x6049: "テ", 0x604A: "ト", # t
    0x604B: "ナ", 0x604C: "ニ", 0x604D: "ヌ", 0x604E: "ネ", 0x604F: "ノ", # n
    0x6050: "ハ", 0x6051: "ヒ", 0x6052: "フ", 0x6053: "ヘ", 0x6054: "ホ", # h
    0x6055: "マ", 0x6056: "ミ", 0x6057: "ム", 0x6058: "メ", 0x6059: "モ", # m
    0x605A: "ヤ",               0x605B: "ユ",               0x605C: "ヨ", # y
    0x605D: "ラ", 0x605E: "リ", 0x605F: "ル", 0x6060: "レ", 0x6061: "ロ", # r
    0x6062: "ワ",                                           0x6063: "ヲ", # w
    0x6064: "ン",                                                         # "n"
    0x6065: "ガ", 0x6066: "ギ", 0x6067: "グ", 0x6068: "ゲ", 0x6069: "ゴ", # g
    0x606A: "ザ", 0x606B: "ジ", 0x606C: "ズ", 0x606D: "ゼ", 0x606E: "ゾ", # z
    0x606F: "ダ", 0x6070: "ヂ", 0x6071: "ヅ", 0x6072: "デ", 0x6073: "ド", # d
    0x6074: "バ", 0x6075: "ビ", 0x6076: "ブ", 0x6077: "ベ", 0x6078: "ボ", # b
    0x6079: "パ", 0x607A: "ピ", 0x607B: "プ", 0x607C: "ペ", 0x607D: "ポ", # p
    0x607E: "ヴ",                                                         # v

    # small katakana
    0x607F: "ァ", 0x6080: "ィ", 0x6081: "ゥ", 0x6082: "ェ", 0x6083: "ォ",
                                0x6084: "ッ",
    0x6085: "ャ",               0x6086: "ュ",               0x6087: "ョ",

    # chōonpu (long vowel mark)
    0x6088: "ー",

    # punctuation
    0x6089: "Ｓ.", 0x608A: "Ｔ.", 0x608B: "Ａ.", 0x608C: "Ｒ.", 0x608D: "＃",
    0x608E: "％",  0x608F: "＋",  0x6090: "；",  0x6091: "．",  0x6092: "～",

    0x6093: "", # not sure what this is supposed to be..

    0x6094: "、",  0x6095: "。",  0x6096: "・",  0x6097: "…",   0x6098: "：",
    0x6099: "！",  0x609A: "？",  0x609B: "（",  0x609C: "）",  0x609D: "「",
    0x609E: "」",  0x609F: "『",  0x60A0: "』",  0x60A1: "〇",  0x60A2: "—",
    0x60A3: "–",   0x60A4: "”",   0x60A5: "“",   0x60A6: "☓",

    # kanji
    0x60A7: "愛", 0x60A8: "悪", 0x60A9: "握", 0x60AA: "圧", 0x60AB: "安",
    0x60AC: "暗", 0x60AD: "以", 0x60AE: "威", 0x60AF: "尉", 0x60B0: "意",
    0x60B1: "椅", 0x60B2: "為", 0x60B3: "異", 0x60B4: "移", 0x60B5: "違",
    0x60B6: "井", 0x60B7: "育", 0x60B8: "一", 0x60B9: "逸", 0x60BA: "員",
    0x60BB: "引", 0x60BC: "院", 0x60BD: "右", 0x60BE: "嘘", 0x60BF: "噂",
    0x60C0: "運", 0x60C1: "営", 0x60C2: "影", 0x60C3: "映", 0x60C4: "洩",
    0x60C5: "衛", 0x60C6: "銳", 0x60C7: "液", 0x60C8: "閲", 0x60C9: "延",
    0x60CA: "援", 0x60CB: "炎", 0x60CC: "汚", 0x60CD: "奥", 0x60CE: "応",
    0x60CF: "押", 0x60D0: "横", 0x60D1: "王", 0x60D2: "屋", 0x60D3: "俺",
    0x60D4: "音", 0x60D5: "下", 0x60D6: "化", 0x60D7: "何", 0x60D8: "価",
    0x60D9: "加", 0x60DA: "可", 0x60DB: "科", 0x60DC: "果", 0x60DD: "歌",
    0x60DE: "火", 0x60DF: "荷", 0x60E0: "華", 0x60E1: "過", 0x60E2: "我",
    0x60E3: "画", 0x60E4: "会", 0x60E5: "解", 0x60E6: "回", 0x60E7: "壊",
    0x60E8: "怪", 0x60E9: "械", 0x60EA: "界", 0x60EB: "皆", 0x60EC: "絵",
    0x60ED: "開", 0x60EE: "階", 0x60EF: "外", 0x60F0: "害", 0x60F1: "垣",
    0x60F2: "各", 0x60F3: "格", 0x60F4: "確", 0x60F5: "角", 0x60F6: "学",
    0x60F7: "掛", 0x60F8: "割", 0x60F9: "鞄", 0x60FA: "完", 0x60FB: "官",
    0x60FC: "幹", 0x60FD: "感", 0x60FE: "換", 0x60FF: "環", 0x6100: "管",
    0x6101: "簡", 0x6102: "貫", 0x6103: "間", 0x6104: "関", 0x6105: "館",
    0x6106: "含", 0x6107: "願", 0x6108: "企", 0x6109: "危", 0x610A: "器",
    0x610B: "基", 0x610C: "奇", 0x610D: "寄", 0x610E: "机", 0x610F: "棄",
    0x6110: "機", 0x6111: "帰", 0x6112: "気", 0x6113: "規", 0x6114: "記",
    0x6115: "貴", 0x6116: "起", 0x6117: "偽", 0x6118: "疑", 0x6119: "議",
    0x611A: "詰", 0x611B: "却", 0x611C: "客", 0x611D: "急", 0x611E: "救",
    0x611F: "求", 0x6120: "究", 0x6121: "級", 0x6122: "給", 0x6123: "去",
    0x6124: "拠", 0x6125: "虚", 0x6126: "許", 0x6127: "距", 0x6128: "京",
    0x6129: "供", 0x612A: "競", 0x612B: "協", 0x612C: "境", 0x612D: "強",
    0x612E: "恐", 0x612F: "挟", 0x6130: "教", 0x6131: "橋", 0x6132: "況",
    0x6133: "狂", 0x6134: "胸", 0x6135: "業", 0x6136: "極", 0x6137: "均",
    0x6138: "筋", 0x6139: "菌", 0x613A: "近", 0x613B: "金", 0x613C: "銀",
    0x613D: "苦", 0x613E: "具", 0x613F: "空", 0x6140: "掘", 0x6141: "繰",
    0x6142: "君", 0x6143: "訓", 0x6144: "群", 0x6145: "軍", 0x6146: "刑",
    0x6147: "型", 0x6148: "形", 0x6149: "径", 0x614A: "掲", 0x614B: "携",
    0x614C: "経", 0x614D: "計", 0x614E: "警", 0x614F: "軽", 0x6150: "迎",
    0x6151: "劇", 0x6152: "撃", 0x6153: "桁", 0x6154: "決", 0x6155: "穴",
    0x6156: "結", 0x6157: "血", 0x6158: "件", 0x6159: "剣", 0x615A: "嫌",
    0x615B: "権", 0x615C: "犬", 0x615D: "研", 0x615E: "肩", 0x615F: "見",
    0x6160: "鍵", 0x6161: "険", 0x6162: "験", 0x6163: "元", 0x6164: "原",
    0x6165: "厳", 0x6166: "減", 0x6167: "源", 0x6168: "現", 0x6169: "言",
    0x616A: "個", 0x616B: "古", 0x616C: "呼", 0x616D: "庫", 0x616E: "戸",
    0x616F: "故", 0x6170: "虎", 0x6171: "互", 0x6172: "後", 0x6173: "御",
    0x6174: "護", 0x6175: "交", 0x6176: "候", 0x6177: "光", 0x6178: "功",
    0x6179: "効", 0x617A: "口", 0x617B: "向", 0x617C: "坑", 0x617D: "好",
    0x617E: "孔", 0x617F: "工", 0x6180: "攻", 0x6181: "更", 0x6182: "校",
    0x6183: "構", 0x6184: "甲", 0x6185: "考", 0x6186: "行", 0x6187: "降",
    0x6188: "高", 0x6189: "号", 0x618A: "合", 0x618B: "豪", 0x618C: "刻",
    0x618D: "告", 0x618E: "黒", 0x618F: "獄", 0x6190: "込", 0x6191: "頃",
    0x6192: "今", 0x6193: "婚", 0x6194: "恨", 0x6195: "根", 0x6196: "左",
    0x6197: "差", 0x6198: "査", 0x6199: "鎖", 0x619A: "座", 0x619B: "再",
    0x619C: "最", 0x619D: "済", 0x619E: "災", 0x619F: "紳", 0x61A0: "戟",
    0x61A1: "剤", 0x61A2: "在", 0x61A3: "材", 0x61A4: "罪", 0x61A5: "作",
    0x61A6: "策", 0x61A7: "索", 0x61A8: "殺", 0x61A9: "三", 0x61AA: "散",
    0x61AB: "産", 0x61AC: "酸", 0x61AD: "残", 0x61AE: "仕", 0x61AF: "使",
    0x61B0: "刺", 0x61B1: "四", 0x61B2: "士", 0x61B3: "始", 0x61B4: "姿",
    0x61B5: "子", 0x61B6: "師", 0x61B7: "思", 0x61B8: "指", 0x61B9: "施",
    0x61BA: "旨", 0x61BB: "止", 0x61BC: "死", 0x61BD: "氏", 0x61BE: "私",
    0x61BF: "紫", 0x61C0: "至", 0x61C1: "誌", 0x61C2: "資", 0x61C3: "飼",
    0x61C4: "歯", 0x61C5: "事", 0x61C6: "似", 0x61C7: "字", 0x61C8: "持",
    0x61C9: "時", 0x61CA: "次", 0x61CB: "磁", 0x61CC: "示", 0x61CD: "自",
    0x61CE: "鹿", 0x61CF: "式", 0x61D0: "識", 0x61D1: "失", 0x61D2: "室",
    0x61D3: "実", 0x61D4: "舎", 0x61D5: "写", 0x61D6: "射", 0x61D7: "捨",
    0x61D8: "赦", 0x61D9: "社", 0x61DA: "者", 0x61DB: "謝", 0x61DC: "車",
    0x61DD: "邪", 0x61DE: "若", 0x61DF: "弱", 0x61E0: "取", 0x61E1: "守",
    0x61E2: "手", 0x61E3: "殊", 0x61E4: "狩", 0x61E5: "種", 0x61E6: "趣",
    0x61E7: "酒", 0x61E8: "囚", 0x61E9: "就", 0x61EA: "修", 0x61EB: "秀",
    0x61EC: "終", 0x61ED: "襲", 0x61EE: "讐", 0x61EF: "蹴", 0x61F0: "集",
    0x61F1: "住", 0x61F2: "十", 0x61F3: "従", 0x61F4: "重", 0x61F5: "銃",
    0x61F6: "宿", 0x61F7: "縮", 0x61F8: "出", 0x61F9: "準", 0x61FA: "処",
    0x61FB: "初", 0x61FC: "所", 0x61FD: "緒", 0x61FE: "書", 0x61FF: "諸",
    0x6200: "助", 0x6201: "女", 0x6202: "除", 0x6203: "傷", 0x6204: "勝",
    0x6205: "将", 0x6206: "小", 0x6207: "少", 0x6208: "床", 0x6209: "掌",
    0x620A: "昇", 0x620B: "晶", 0x620C: "消", 0x620D: "燒", 0x620E: "照",
    0x620F: "肖", 0x6210: "衝", 0x6211: "証", 0x6212: "詳", 0x6213: "鐘",
    0x6214: "上", 0x6215: "丈", 0x6216: "乗", 0x6217: "城", 0x6218: "場",
    0x6219: "常", 0x621A: "情", 0x621B: "状", 0x621C: "錠", 0x621D: "触",
    0x621E: "食", 0x621F: "信", 0x6220: "寝", 0x6221: "心", 0x6222: "新",
    0x6223: "森", 0x6224: "真", 0x6225: "投", 0x6226: "神", 0x6227: "身",
    0x6228: "進", 0x6229: "針", 0x622A: "人", 0x622B: "図", 0x622C: "厨",
    0x622D: "水", 0x622E: "崇", 0x622F: "数", 0x6230: "世", 0x6231: "制",
    0x6232: "勢", 0x6233: "性", 0x6234: "成", 0x6235: "整", 0x6236: "晴",
    0x6237: "正", 0x6238: "生", 0x6239: "精", 0x623A: "声", 0x623B: "製",
    0x623C: "西", 0x623D: "誠", 0x623E: "青", 0x623F: "席", 0x6240: "石",
    0x6241: "積", 0x6242: "績", 0x6243: "赤", 0x6244: "跡", 0x6245: "切",
    0x6246: "接", 0x6247: "折", 0x6248: "設", 0x6249: "説", 0x624A: "絶",
    0x624B: "先", 0x624C: "宣", 0x624D: "専", 0x624E: "戦", 0x624F: "染",
    0x6250: "線", 0x6251: "践", 0x6252: "選", 0x6253: "前", 0x6254: "善",
    0x6255: "全", 0x6256: "狙", 0x6257: "礎", 0x6258: "祖", 0x6259: "素",
    0x625A: "組", 0x625B: "創", 0x625C: "倉", 0x625D: "層", 0x625E: "捜",
    0x625F: "操", 0x6260: "早", 0x6261: "相", 0x6262: "窓", 0x6263: "草",
    0x6264: "装", 0x6265: "走", 0x6266: "送", 0x6267: "像", 0x6268: "増",
    0x6269: "憎", 0x626A: "造", 0x626B: "側", 0x626C: "即", 0x626D: "息",
    0x626E: "束", 0x626F: "足", 0x6270: "属", 0x6271: "続", 0x6272: "孫",
    0x6273: "他", 0x6274: "多", 0x6275: "太", 0x6276: "打", 0x6277: "駄",
    0x6278: "体", 0x6279: "対", 0x627A: "耐", 0x627B: "帯", 0x627C: "待",
    0x627D: "退", 0x627E: "逮", 0x627F: "隊", 0x6280: "代", 0x6281: "台",
    0x6282: "大", 0x6283: "第", 0x6284: "択", 0x6285: "達", 0x6286: "脱",
    0x6287: "辿", 0x6288: "誰", 0x6289: "単", 0x628A: "探", 0x628B: "短",
    0x628C: "団", 0x628D: "弾", 0x628E: "段", 0x628F: "男", 0x6290: "知",
    0x6291: "地", 0x6292: "置", 0x6293: "着", 0x6294: "中", 0x6295: "仲",
    0x6296: "忠", 0x6297: "抽", 0x6298: "柱", 0x6299: "注", 0x629A: "虫",
    0x629B: "張", 0x629C: "彫", 0x629D: "徴", 0x629E: "潮", 0x629F: "調",
    0x62A0: "長", 0x62A1: "直", 0x62A2: "追", 0x62A3: "痛", 0x62A4: "通",
    0x62A5: "掴", 0x62A6: "停", 0x62A7: "定", 0x62A8: "底", 0x62A9: "弟",
    0x62AA: "提", 0x62AB: "的", 0x62AC: "哲", 0x62AD: "鉄", 0x62AE: "填",
    0x62AF: "天", 0x62B0: "展", 0x62B1: "貼", 0x62B2: "転", 0x62B3: "点",
    0x62B4: "伝", 0x62B5: "殿", 0x62B6: "電", 0x62B7: "吐", 0x62B8: "塗",
    0x62B9: "徒", 0x62BA: "登", 0x62BB: "度", 0x62BC: "奴", 0x62BD: "怒",
    0x62BE: "倒", 0x62BF: "塔", 0x62C0: "投", 0x62C1: "灯", 0x62C2: "当",
    0x62C3: "等", 0x62C4: "答", 0x62C5: "逃", 0x62C6: "頭", 0x62C7: "闘",
    0x62C8: "動", 0x62C9: "同", 0x62CA: "道", 0x62CB: "得", 0x62CC: "特",
    0x62CD: "毒", 0x62CE: "読", 0x62CF: "突", 0x62D0: "届", 0x62D1: "内",
    0x62D2: "南", 0x62D3: "難", 0x62D4: "二", 0x62D5: "日", 0x62D6: "入",
    0x62D7: "任", 0x62D8: "認", 0x62D9: "熱", 0x62DA: "年", 0x62DB: "悩",
    0x62DC: "濃", 0x62DD: "能", 0x62DE: "波", 0x62DF: "派", 0x62E0: "破",
    0x62E1: "馬", 0x62E2: "廃", 0x62E3: "排", 0x62E4: "杯", 0x62E5: "配",
    0x62E6: "倍", 0x62E7: "秤", 0x62E8: "博", 0x62E9: "迫", 0x62EA: "爆",
    0x62EB: "縛", 0x62EC: "箱", 0x62ED: "筈", 0x62EE: "発", 0x62EF: "抜",
    0x62F0: "反", 0x62F1: "板", 0x62F2: "版", 0x62F3: "般", 0x62F4: "晚",
    0x62F5: "盤", 0x62F6: "彼", 0x62F7: "悲", 0x62F8: "扉", 0x62F9: "斐",
    0x62FA: "秘", 0x62FB: "避", 0x62FC: "非", 0x62FD: "飛", 0x62FE: "備",
    0x62FF: "美", 0x6300: "必", 0x6301: "紐", 0x6302: "標", 0x6303: "表",
    0x6304: "描", 0x6305: "品", 0x6306: "瓶", 0x6307: "不", 0x6308: "付",
    0x6309: "夫", 0x630A: "斧", 0x630B: "父", 0x630C: "武", 0x630D: "舞",
    0x630E: "部", 0x630F: "風", 0x6310: "復", 0x6311: "服", 0x6312: "物",
    0x6313: "分", 0x6314: "紛", 0x6315: "文", 0x6316: "聞", 0x6317: "併",
    0x6318: "兵", 0x6319: "平", 0x631A: "並", 0x631B: "閉", 0x631C: "米",
    0x631D: "癖", 0x631E: "別", 0x631F: "変", 0x6320: "片", 0x6321: "辺",
    0x6322: "返", 0x6323: "保", 0x6324: "捕", 0x6325: "補", 0x6326: "簿",
    0x6327: "報", 0x6328: "宝", 0x6329: "崩", 0x632A: "抱", 0x632B: "捧",
    0x632C: "放", 0x632D: "方", 0x632E: "法", 0x632F: "房", 0x6330: "暴",
    0x6331: "謀", 0x6332: "北", 0x6333: "没", 0x6334: "本", 0x6335: "魔",
    0x6336: "枚", 0x6337: "毎", 0x6338: "末", 0x6339: "万", 0x633A: "満",
    0x633B: "味", 0x633C: "魔", 0x633D: "枚", 0x633E: "毎", 0x633F: "末",
    0x6340: "万", 0x6341: "満", 0x6342: "味", 0x6343: "明", 0x6344: "鳴",
    0x6345: "滅", 0x6346: "面", 0x6347: "模", 0x6348: "網", 0x6349: "木",
    0x634A: "黙", 0x634B: "目", 0x634C: "勿", 0x634D: "戻", 0x634E: "貰",
    0x634F: "問", 0x6350: "門", 0x6351: "爺", 0x6352: "役", 0x6353: "約",
    0x6354: "薬", 0x6355: "癒", 0x6356: "優", 0x6357: "友", 0x6358: "由",
    0x6359: "予", 0x635A: "与", 0x635B: "容", 0x635C: "様", 0x635D: "洋",
    0x635E: "溶", 0x635F: "用", 0x6360: "要", 0x6361: "陽", 0x6362: "養",
    0x6363: "抑", 0x6364: "翌", 0x6365: "裸", 0x6366: "来", 0x6367: "頼",
    0x6368: "絡", 0x6369: "落", 0x636A: "卵", 0x636B: "覧", 0x636C: "利",
    0x636D: "理", 0x636E: "裏", 0x636F: "離", 0x6370: "律", 0x6371: "率",
    0x6372: "立", 0x6373: "流", 0x6374: "硫", 0x6375: "了", 0x6376: "両",
    0x6377: "料", 0x6378: "猟", 0x6379: "良", 0x637A: "量", 0x637B: "力",
    0x637C: "緑", 0x637D: "令", 0x637E: "齢", 0x637F: "曆", 0x6380: "列",
    0x6381: "裂", 0x6382: "練", 0x6383: "連", 0x6384: "炉", 0x6385: "路",
    0x6386: "漏", 0x6387: "老", 0x6388: "録", 0x6389: "論", 0x638A: "話",
    0x638B: "秀", 0x638C: "殲", 0x638D: "炸", 0x638E: "甦", 0x638F: "痒",
    0x6390: "々", 0x6391: "店", 0x6392: "扱", 0x6393: "莢", 0x6394: "値",
    0x6395: "振", 0x6396: "輝", 0x6397: "期", 0x6398: "域", 0x6399: "央",
    0x639A: "監", 0x639B: "錆", 0x639C: "視", 0x639D: "受", 0x639E: "臭",
    0x639F: "渡", 0x63A0: "拝", 0x63A1: "堂", 0x63A2: "粘", 0x63A3: "漂",
    0x63A4: "薬", 0x63A5: "礼",

    # punctuation supplement
    0x63A6: "", # undefined?

    0x63A7: "＜", 0x63A8: "＞", 0x63A9: "＆", 0x63AA: "▼", 0x63AB: "▶",

    0x63AC: "▲", 0x63AD: "！？", 0x63AE:  "←", 0x63AF: "→", 0x63B0: "／",

    0x63B1: "［", 0x63B2: "］", 0x63B3: "＊",

    0x63B4: "＝", # could be geta mark (〓)

    0x63B5: "＿", 0x63B6: "※", 0x63B7: "●", 0x63B8: "‼",

    0x63B9: "ー", # chōonpu again.. ?

    0x63BA: "ʼ", 0x63BB: ",",

    0x63BC: " ", # space (U+0020)

    # duplicates
    0x63BD: "体", 0x63BE: "対", 0x63BF: "耐", 0x63C0: "帯", 0x63C1: "待",
    0x63C2: "退", 0x63C3: "逮", 0x63C4: "隊", 0x63C5: "代", 0x63C6: "台",
    0x63C7: "大", 0x63C8: "第", 0x63C9: "択", 0x63CA: "達", 0x63CB: "脱",
    0x63CC: "料", 0x63CD: "猟", 0x63CE: "良", 0x63CF: "量", 0x63D0: "力",
    0x63D1: "緑", 0x63D2: "令", 0x63D3: "齢", 0x63D4: "曆", 0x63D5: "列",
    0x63D6: "裂", 0x63D7: "練", 0x63D8: "連", 0x63D9: "炉", 0x63DA: "路",
    0x63DB: "漏", 0x63DC: "",   0x63DD: "",   0x63DE: "",   0x63DF: "",
    0x63E0: "辿", 0x63E1: "誰", 0x63E2: "単", 0x63E3: "探", 0x63E4: "短",
    0x63E5: "団", 0x63E6: "弾", 0x63E7: "段", 0x63E8: "男", 0x63E9: "知",
    0x63EA: "地", 0x63EB: "置", 0x63EC: "着", 0x63ED: "中", 0x63EE: "仲",
    0x63EF: "忠", 0x63F0: "老", 0x63F1: "録", 0x63F2: "論", 0x63F3: "話",

    # kanji supplement
    0x63F4: "戮",

    # more duplicates / undefined
    0x63F5: "殲", 0x63F6: "炸", 0x63F7: "甦",   0x63F8: "痒", 0x63F9: "々",
    0x63FA: "店", 0x63FB: "扱", 0x63FC: "莢",   0x63FD: "値", 0x63FE: "振",
    0x63FF: "輝", 0x6400: "",   0x6401: "",     0x6402: "",   0x6403: "",
    0x6404: "抽", 0x6405: "柱", 0x6406: "注",   0x6407: "虫", 0x6408: "張",
    0x6409: "彫", 0x640A: "徴", 0x640B: "潮",   0x640C: "調", 0x640D: "長",
    0x640E: "直", 0x640F: "追", 0x6410: "痛",   0x6411: "通", 0x6412: "掴",
    0x6413: "停", 0x6414: "期", 0x6415: "域",   0x6416: "央", 0x6417: "監",
    0x6418: "錆", 0x6419: "視", 0x641A: "受",   0x641B: "臭", 0x641C: "渡",
    0x641D: "拝", 0x641E: "堂", 0x641F: "粘",   0x6420: "漂", 0x6421: "薬",
    0x6422: "礼", 0x6423: "",   0x6424: "",     0x6425: "",   0x6426: "",
    0x6427: "",   0x6428: "＜", 0x6429: "＞",   0x642A: "＆", 0x642B: "▼",
    0x642C: "▶",  0x642D: "▲",  0x642E: "！？", 0x642F: "←",  0x6430: "→",
    0x6431: "／", 0x6432: "［", 0x6433: "］",   0x6434: "＊", 0x6435: "＝",
    0x6436: "＿", 0x6437: "※",  0x6438: "",     0x6439: "",   0x643A: "",
    0x643B: "",   0x643C: "",   0x643D: "",     0x643E: "",   0x643F: "",
    0x6440: "",   0x6441: "",   0x6442: "",     0x6443: "",   0x6444: "",
    0x6445: "",   0x6446: "",   0x6447: "",     0x6448: "",   0x6449: "",
    0x644A: "",   0x644B: "",   0x644C: "●",    0x644D: "‼",  0x644E: "ー",
    0x644F: "ʼ",  0x6450: ",",  0x6451: " ",

    # 6452 -> 64B8 = undefined
    # 64B9 -> 73FF = character slices
    # >=7400 = Dolphin crashes
}










cp_jp = {
    # space (U+0020)
    0x47: " ",

    # hiragana
    #        a             i             u             e             o
    0x48:   "あ", 0x49:   "い", 0x4A:   "う", 0x4B:   "え", 0x4C:   "お", # /
    0x4D:   "か", 0x4E:   "き", 0x4F:   "く", 0x50:   "け", 0x51:   "こ", # k
    0x52:   "さ", 0x53:   "し", 0x54:   "す", 0x55:   "せ", 0x56:   "そ", # s
    0x57:   "た", 0x58:   "ち", 0x59:   "つ", 0x5A:   "て", 0x5B:   "と", # t
    0x5C:   "な", 0x5D:   "に", 0x5E:   "ぬ", 0x5F:   "ね", 0x6000: "の", # n
    0x6001: "は", 0x6002: "ひ", 0x6003: "ふ", 0x6004: "へ", 0x6005: "ほ", # h
    0x6006: "ま", 0x6007: "み", 0x6008: "む", 0x6009: "め", 0x600A: "も", # m
    0x600B: "や",               0x600C: "ゆ",               0x600D: "よ", # y
    0x600E: "ら", 0x600F: "り", 0x6010: "る", 0x6011: "れ", 0x6012: "ろ", # r
    0x6013: "わ",                                           0x6014: "を", # w
    0x6015: "ん",                                                         # "n"
    0x6016: "が", 0x6017: "ぎ", 0x6018: "ぐ", 0x6019: "げ", 0x601A: "ご", # g
    0x601B: "ざ", 0x601C: "じ", 0x601D: "ず", 0x601E: "ぜ", 0x601F: "ぞ", # z
    0x6020: "だ", 0x6021: "ぢ", 0x6022: "づ", 0x6023: "で", 0x6024: "ど", # d
    0x6025: "ば", 0x6026: "び", 0x6027: "ぶ", 0x6028: "べ", 0x6029: "ぼ", # b
    0x602A: "ぱ", 0x602B: "ぴ", 0x602C: "ぷ", 0x602D: "ぺ", 0x602E: "ぽ", # p

    # small hiragana
    0x602F: "ぁ", 0x6030: "ぃ", 0x6031: "ぅ", 0x6032: "ぇ", 0x6033: "ぉ",
                                0x6034: "っ",
    0x6035: "ゃ",               0x6036: "ゅ",               0x6037: "ょ",

    # kanji
    0x6038: "築", 0x6039: "過", 0x603A: "爪", 0x603B: "痕", 0x603C: "至",
    0x603D: "台", 0x603E: "資", 0x603F: "闇", 0x6040: "息", 0x6041: "速",
    0x6042: "途", 0x6043: "襲", 0x6044: "図", 0x6045: "計", 0x6046: "洗",

    # punctuation
    0x6047: "；",

    # undefined
    0x6048: "", 0x6049: "", 0x604A: "", 0x604B: "", 0x604C: "",
    0x604D: "", 0x604E: "", 0x604F: "", 0x6050: "", 0x6051: "",
    0x6052: "", 0x6053: "", 0x6054: "", 0x6055: "", 0x6056: "",
    0x6057: "",

    # kanji supplement
    0x6058: "々", 0x6059: "悪", 0x605A: "悪", 0x605B: "握", 0x605C: "安",
    0x605D: "以", 0x605E: "位", 0x605F: "資", 0x6060: "以", 0x6061: "異",
    0x6062: "移", 0x6063: "域", 0x6064: "意", 0x6065: "一", 0x6066: "員",
    0x6067: "異", 0x6068: "化", 0x6069: "影", 0x606A: "加", 0x606B: "液",
    0x606C: "炎", 0x606D: "火", 0x606E: "汚", 0x606F: "我", 0x6070: "奥",
    0x6071: "応", 0x6072: "解", 0x6073: "屋", 0x6074: "下", 0x6075: "化",
    0x6076: "何", 0x6077: "械", 0x6078: "海", 0x6079: "感", 0x607A: "界",
    0x607B: "環", 0x607C: "監", 0x607D: "開", 0x607E: "階", 0x607F: "外",
    0x6080: "丸", 0x6081: "格", 0x6082: "危", 0x6083: "器", 0x6084: "角",
    0x6085: "奇", 0x6086: "学", 0x6087: "希", 0x6088: "基", 0x6089: "奇",
    0x608A: "寄", 0x608B: "級", 0x608C: "期", 0x608D: "棄", 0x608E: "機",
    0x608F: "気", 0x6090: "規", 0x6091: "協", 0x6092: "起", 0x6093: "騎",
    0x6094: "恐", 0x6095: "教", 0x6096: "況", 0x6097: "詰", 0x6098: "君",
    0x6099: "群", 0x609A: "軍", 0x609B: "刑", 0x609C: "業", 0x609D: "形",
    0x609E: "禁", 0x609F: "菌", 0x60A0: "近", 0x60A1: "金", 0x60A2: "苦",
    0x60A3: "穴", 0x60A4: "結", 0x60A5: "具", 0x60A6: "空", 0x60A7: "件",

    # katakana
    #        a             i             u             e             o
    0x60A8: "ア", 0x60A9: "イ", 0x60AA: "ウ", 0x60AB: "エ", 0x60AC: "オ", # /
    0x60AD: "カ", 0x60AE: "キ", 0x60AF: "ク", 0x60B0: "ケ", 0x60B1: "コ", # k
    0x60B2: "サ", 0x60B3: "シ", 0x60B4: "ス", 0x60B5: "セ", 0x60B6: "ソ", # s
    0x60B7: "タ", 0x60B8: "チ", 0x60B9: "ツ", 0x60BA: "テ", 0x60BB: "ト", # t
    0x60BC: "ナ", 0x60BD: "ニ", 0x60BE: "ヌ", 0x60BF: "ネ", 0x60C0: "ノ", # n
    0x60C1: "ハ", 0x60C2: "ヒ", 0x60C3: "フ", 0x60C4: "ヘ", 0x60C5: "ホ", # h
    0x60C6: "マ", 0x60C7: "ミ", 0x60C8: "ム", 0x60C9: "メ", 0x60CA: "モ", # m
    0x60CB: "ヤ",               0x60CC: "ユ",               0x60CD: "ヨ", # y
    0x60CE: "ラ", 0x60CF: "リ", 0x60D0: "ル", 0x60D1: "レ", 0x60D2: "ロ", # r
    0x60D3: "ワ",                                           0x60D4: "ヲ", # w
    0x60D5: "ン",                                                         # "n"
    0x60D6: "ガ", 0x60D7: "ギ", 0x60D8: "グ", 0x60D9: "ゲ", 0x60DA: "ゴ", # g
    0x60DB: "ザ", 0x60DC: "ジ", 0x60DD: "ズ", 0x60DE: "ゼ", 0x60DF: "ゾ", # z
    0x60E0: "ダ", 0x60E1: "ヂ", 0x60E2: "ヅ", 0x60E3: "デ", 0x60E4: "ド", # d
    0x60E5: "バ", 0x60E6: "ビ", 0x60E7: "ブ", 0x60E8: "ベ", 0x60E9: "ボ", # b
    0x60EA: "パ", 0x60EB: "ピ", 0x60EC: "プ", 0x60ED: "ペ", 0x60EE: "ポ", # p
    0x60EF: "ヴ",                                                         # v

    # small katakana
    0x60F0: "ァ", 0x60F1: "ィ", 0x60F2: "ゥ", 0x60F3: "ェ", 0x60F4: "ォ",
                                0x60F5: "ッ",
    0x60F6: "ャ",               0x60F7: "ュ",               0x60F8: "ョ",

    # punctuation supplement
    0x60F9: "ー",  0x60FA: "Ｓ.", 0x60FB: "Ｔ.", 0x60FC: "Ａ.", 0x60FD: "Ｒ.",
    0x60FE: "±",   0x60FF: "℃",   0x6100: "＋",  0x6101: "＝",  0x6102: "．", 
    0x6103: "←",   0x6104: "→",   0x6105: "、",  0x6106: "。",  0x6107: "・",
    0x6108: "…",   0x6109: "：",  0x610A: "！",  0x610B: "？",  0x610C: "（",
    0x610D: "）",  0x610E: "「",  0x610F: "」",  0x6110: "『",  0x6111: "』",
    0x6112: "〇",  0x6113: "ー",  0x6114: "-",   0x6115: "”",   0x6116: "“",
    0x6117: "☓",   0x6118: "／",  0x6119: "ʼ",   0x611A: ",",   0x611B: "▼",
    0x611C: "▶",   0x611D: "▲",   0x611E: "※",

    # kanji supplement
    0x611F: "明", 0x6120: "続", 0x6121: "場", 0x6122: "合", 0x6123: "開",
    0x6124: "",   0x6125: "",   0x6126: "",   0x6127: "",   0x6128: "扱",
    0x6129: "押", 0x612A: "源", 0x612B: "指", 0x612C: "示", 0x612D: "取",
    0x612E: "従", 0x612F: "書", 0x6130: "生", 0x6131: "説", 0x6132: "体",
    0x6133: "電", 0x6134: "読", 0x6135: "発", 0x6136: "閉", 0x6137: "本",

    # punctuation supplement
    0x6138: "↑", 0x6139: "↓",

    # undefined
    0x613A: "",   0x613B: "",   0x613C: "",   0x613D: "",   0x613E: "",
    0x613F: "",   0x6140: "",   0x6141: "",   0x6142: "",   0x6143: "",
    0x6144: "",   0x6145: "",   0x6146: "",   0x6147: "",   0x6148: "",
    0x6149: "",   0x614A: "",   0x614B: "",   0x614C: "",   0x614D: "",
    0x614E: "",   0x614F: "",   0x6150: "",   0x6151: "",   0x6152: "",
    0x6153: "",   0x6154: "",   0x6155: "",   0x6156: "",   0x6157: "",

    # kanji supplement
    0x6158: "移", 0x6159: "隠", 0x615A: "運", 0x615B: "影", 0x615C: "栄",
    0x615D: "育", 0x615E: "一", 0x615F: "越", 0x6160: "員", 0x6161: "引",
    0x6162: "奥", 0x6163: "熱", 0x6164: "隠", 0x6165: "右", 0x6166: "音",
    0x6167: "運", 0x6168: "加", 0x6169: "可", 0x616A: "果", 0x616B: "火",
    0x616C: "外", 0x616D: "各", 0x616E: "荷", 0x616F: "殻", 0x6170: "過",
    0x6171: "画", 0x6172: "会", 0x6173: "解", 0x6174: "回", 0x6175: "壊",
    0x6176: "怪", 0x6177: "械", 0x6178: "掛", 0x6179: "巻", 0x617A: "完",
    0x617B: "帰", 0x617C: "感", 0x617D: "規", 0x617E: "管", 0x617F: "起",
    0x6180: "騎", 0x6181: "間", 0x6182: "関", 0x6183: "詰", 0x6184: "客",
    0x6185: "逆", 0x6186: "危", 0x6187: "器", 0x6188: "客", 0x6189: "驚",
    0x618A: "業", 0x618B: "急", 0x618C: "禁", 0x618D: "菌", 0x618E: "球",
    0x618F: "究", 0x6190: "給", 0x6191: "句", 0x6192: "巨", 0x6193: "供",
    0x6194: "具", 0x6195: "強", 0x6196: "恐", 0x6197: "繰", 0x6198: "繰",
    0x6199: "検", 0x619A: "群", 0x619B: "大", 0x619C: "型", 0x619D: "形",
    0x619E: "険", 0x619F: "験", 0x61A0: "元", 0x61A1: "襲", 0x61A2: "現",
    0x61A3: "激", 0x61A4: "限", 0x61A5: "決", 0x61A6: "穴", 0x61A7: "血",
    0x61A8: "固", 0x61A9: "己", 0x61AA: "庫", 0x61AB: "検", 0x61AC: "研",
    0x61AD: "後", 0x61AE: "見", 0x61AF: "護", 0x61B0: "険", 0x61B1: "験",
    0x61B2: "元", 0x61B3: "原", 0x61B4: "個", 0x61B5: "古", 0x61B6: "呼",
    0x61B7: "固", 0x61B8: "高", 0x61B9: "荒", 0x61BA: "行", 0x61BB: "刻",
    0x61BC: "降", 0x61BD: "黒", 0x61BE: "高", 0x61BF: "合", 0x61C0: "今",
    0x61C1: "困", 0x61C2: "刻", 0x61C3: "根", 0x61C4: "黒", 0x61C5: "査",
    0x61C6: "込", 0x61C7: "今", 0x61C8: "剤", 0x61C9: "材", 0x61CA: "作",
    0x61CB: "残", 0x61CC: "索", 0x61CD: "使", 0x61CE: "司", 0x61CF: "四",
    0x61D0: "士", 0x61D1: "三", 0x61D2: "姿", 0x61D3: "散", 0x61D4: "残",
    0x61D5: "仕", 0x61D6: "使", 0x61D7: "止", 0x61D8: "時", 0x61D9: "失",
    0x61DA: "磁", 0x61DB: "自", 0x61DC: "識", 0x61DD: "失", 0x61DE: "写",
    0x61DF: "射", 0x61E0: "写", 0x61E1: "社", 0x61E2: "者", 0x61E3: "車",
    0x61E4: "弱", 0x61E5: "主", 0x61E6: "邪", 0x61E7: "弱", 0x61E8: "重",
    0x61E9: "銃", 0x61EA: "出", 0x61EB: "巡", 0x61EC: "処", 0x61ED: "初",
    0x61EE: "所", 0x61EF: "女", 0x61F0: "除", 0x61F1: "助", 0x61F2: "女",
    0x61F3: "小", 0x61F4: "少", 0x61F5: "勝", 0x61F6: "掌", 0x61F7: "昇",
    0x61F8: "色", 0x61F9: "触", 0x61FA: "食", 0x61FB: "織", 0x61FC: "新",
    0x61FD: "深", 0x61FE: "真", 0x61FF: "信", 0x6200: "親", 0x6201: "身",
    0x6202: "針", 0x6203: "人", 0x6204: "襲", 0x6205: "厨", 0x6206: "親",
    0x6207: "水", 0x6208: "切", 0x6209: "誠", 0x620A: "設", 0x620B: "青",
    0x620C: "絶", 0x620D: "席", 0x620E: "専", 0x620F: "籍", 0x6210: "戦",
    0x6211: "赤", 0x6212: "染", 0x6213: "線", 0x6214: "接", 0x6215: "前",
    0x6216: "節", 0x6217: "然", 0x6218: "送", 0x6219: "像", 0x621A: "増",
    0x621B: "早", 0x621C: "蔵", 0x621D: "捜", 0x621E: "側", 0x621F: "闇",
    0x6220: "束", 0x6221: "窓", 0x6222: "足", 0x6223: "息", 0x6224: "続",
    0x6225: "存", 0x6226: "損", 0x6227: "他", 0x6228: "替", 0x6229: "弾",
    0x622A: "断", 0x622B: "隊", 0x622C: "段", 0x622D: "大", 0x622E: "値",
    0x622F: "知", 0x6230: "地", 0x6231: "置", 0x6232: "誰", 0x6233: "築",
    0x6234: "着", 0x6235: "中", 0x6236: "誕", 0x6237: "注", 0x6238: "張",
    0x6239: "的", 0x623A: "聴", 0x623B: "天", 0x623C: "転", 0x623D: "点",
    0x623E: "渡", 0x623F: "登", 0x6240: "速", 0x6241: "度", 0x6242: "倒",
    0x6243: "投", 0x6244: "東", 0x6245: "廷", 0x6246: "当", 0x6247: "程",
    0x6248: "日", 0x6249: "乳", 0x624A: "入", 0x624B: "動", 0x624C: "同",
    0x624D: "脱", 0x624E: "年", 0x624F: "燃", 0x6250: "特", 0x6251: "毒",
    0x6252: "能", 0x6253: "突", 0x6254: "届", 0x6255: "破", 0x6256: "謎",
    0x6257: "南", 0x6258: "背", 0x6259: "配", 0x625A: "備", 0x625B: "剥",
    0x625C: "博", 0x625D: "必", 0x625E: "標", 0x625F: "爆", 0x6260: "表",
    0x6261: "描", 0x6262: "品", 0x6263: "判", 0x6264: "不", 0x6265: "付",
    0x6266: "班", 0x6267: "繁", 0x6268: "片", 0x6269: "不", 0x626A: "保",
    0x626B: "捕", 0x626C: "武", 0x626D: "部", 0x626E: "封", 0x626F: "副",
    0x6270: "復", 0x6271: "捧", 0x6272: "放", 0x6273: "方", 0x6274: "分",
    0x6275: "文", 0x6276: "房", 0x6277: "兵", 0x6278: "滅", 0x6279: "面",
    0x627A: "模", 0x627B: "望", 0x627C: "木", 0x627D: "目", 0x627E: "戻",
    0x627F: "問", 0x6280: "没", 0x6281: "混", 0x6282: "役", 0x6283: "薬",
    0x6284: "味", 0x6285: "優", 0x6286: "密", 0x6287: "由", 0x6288: "理",
    0x6289: "立", 0x628A: "流", 0x628B: "容", 0x628C: "様", 0x628D: "了",
    0x628E: "料", 0x628F: "要", 0x6290: "陽", 0x6291: "良", 0x6292: "量",
    0x6293: "力", 0x6294: "緑", 0x6295: "頼", 0x6296: "類", 0x6297: "落",
    0x6298: "量", 0x6299: "力", 0x629A: "緑", 0x629B: "類", 0x629C: "令",
    0x629D: "例", 0x629E: "隷", 0x629F: "齢", 0x62A0: "列", 0x62A1: "連",
    0x62A2: "路", 0x62A3: "録", 0x62A4: "話", 0x62A5: "脇", 0x62A6: "哺",
    0x62A7: "榴", 0x62A8: "庫", 0x62A9: "坑", 0x62AA: "好", 0x62AB: "工",
    0x62AC: "後", 0x62AD: "御", 0x62AE: "護", 0x62AF: "光", 0x62B0: "口",
    0x62B1: "向", 0x62B2: "硬", 0x62B3: "工", 0x62B4: "荒", 0x62B5: "行",
    0x62B6: "拘", 0x62B7: "構", 0x62B8: "根", 0x62B9: "最", 0x62BA: "痕",
    0x62BB: "祭", 0x62BC: "細", 0x62BD: "差", 0x62BE: "査", 0x62BF: "鎖",
    0x62C0: "座", 0x62C1: "最", 0x62C2: "策", 0x62C3: "索", 0x62C4: "済",
    0x62C5: "殺", 0x62C6: "祭", 0x62C7: "細", 0x62C8: "四", 0x62C9: "士",
    0x62CA: "姿", 0x62CB: "子", 0x62CC: "詩", 0x62CD: "施", 0x62CE: "止",
    0x62CF: "死", 0x62D0: "私", 0x62D1: "至", 0x62D2: "資", 0x62D3: "飼",
    0x62D4: "事", 0x62D5: "字", 0x62D6: "式", 0x62D7: "持", 0x62D8: "手",
    0x62D9: "殊", 0x62DA: "種", 0x62DB: "受", 0x62DC: "囚", 0x62DD: "囚",
    0x62DE: "収", 0x62DF: "秀", 0x62E0: "終", 0x62E1: "終", 0x62E2: "集",
    0x62E3: "充", 0x62E4: "途", 0x62E5: "集", 0x62E6: "充", 0x62E7: "宿",
    0x62E8: "消", 0x62E9: "照", 0x62EA: "昇", 0x62EB: "消", 0x62EC: "上",
    0x62ED: "照", 0x62EE: "乗", 0x62EF: "象", 0x62F0: "場", 0x62F1: "情",
    0x62F2: "浄", 0x62F3: "状", 0x62F4: "常", 0x62F5: "飾", 0x62F6: "浄",
    0x62F7: "状", 0x62F8: "数", 0x62F9: "世", 0x62FA: "制", 0x62FB: "勢",
    0x62FC: "性", 0x62FD: "成", 0x62FE: "整", 0x62FF: "是", 0x6300: "制",
    0x6301: "勢", 0x6302: "青", 0x6303: "席", 0x6304: "石", 0x6305: "晴",
    0x6306: "赤", 0x6307: "跡", 0x6308: "全", 0x6309: "礎", 0x630A: "専",
    0x630B: "倉", 0x630C: "洗", 0x630D: "染", 0x630E: "操", 0x630F: "早",
    0x6310: "選", 0x6311: "前", 0x6312: "然", 0x6313: "全", 0x6314: "窓",
    0x6315: "礎", 0x6316: "装", 0x6317: "走", 0x6318: "多", 0x6319: "打",
    0x631A: "待", 0x631B: "態", 0x631C: "替", 0x631D: "袋", 0x631E: "隊",
    0x631F: "代", 0x6320: "台", 0x6321: "多", 0x6322: "太", 0x6323: "脱",
    0x6324: "駄", 0x6325: "誰", 0x6326: "探", 0x6327: "態", 0x6328: "虫",
    0x6329: "著", 0x632A: "段", 0x632B: "調", 0x632C: "長", 0x632D: "直",
    0x632E: "沈", 0x632F: "追", 0x6330: "通", 0x6331: "中", 0x6332: "爪",
    0x6333: "停", 0x6334: "定", 0x6335: "著", 0x6336: "底", 0x6337: "程",
    0x6338: "敵", 0x6339: "的", 0x633A: "適", 0x633B: "頭", 0x633C: "動",
    0x633D: "貼", 0x633E: "道", 0x633F: "得", 0x6340: "特", 0x6341: "毒",
    0x6342: "突", 0x6343: "届", 0x6344: "奴", 0x6345: "内", 0x6346: "難",
    0x6347: "東", 0x6348: "廃", 0x6349: "二", 0x634A: "背", 0x634B: "配",
    0x634C: "入", 0x634D: "任", 0x634E: "剥", 0x634F: "白", 0x6350: "年",
    0x6351: "抜", 0x6352: "半", 0x6353: "反", 0x6354: "能", 0x6355: "盤",
    0x6356: "破", 0x6357: "扉", 0x6358: "般", 0x6359: "武", 0x635A: "盤",
    0x635B: "部", 0x635C: "扉", 0x635D: "復", 0x635E: "服", 0x635F: "肥",
    0x6360: "物", 0x6361: "分", 0x6362: "匹", 0x6363: "文", 0x6364: "聞",
    0x6365: "並", 0x6366: "描", 0x6367: "変", 0x6368: "防", 0x6369: "没",
    0x636A: "変", 0x636B: "魔", 0x636C: "編", 0x636D: "返", 0x636E: "万",
    0x636F: "捕", 0x6370: "咮", 0x6371: "簿", 0x6372: "報", 0x6373: "務",
    0x6374: "無", 0x6375: "名", 0x6376: "命", 0x6377: "法", 0x6378: "無",
    0x6379: "予", 0x637A: "命", 0x637B: "滅", 0x637C: "容", 0x637D: "様",
    0x637E: "木", 0x637F: "用", 0x6380: "要", 0x6381: "養", 0x6382: "翼",
    0x6383: "混", 0x6384: "落", 0x6385: "薬", 0x6386: "卵", 0x6387: "利",
    0x6388: "列", 0x6389: "覧", 0x638A: "利", 0x638B: "理", 0x638C: "連",
    0x638D: "離", 0x638E: "路", 0x638F: "率", 0x6390: "立", 0x6391: "流",
    0x6392: "硫", 0x6393: "話", 0x6394: "両", 0x6395: "料", 0x6396: "猟",
    0x6397: "良", 0x6398: "炸",

    # duplicates.. ?
    0x6399: "↑", 0x639A: "↓",

    # kanji supplement
    0x639B: "夷", 0x639C: "遺", 0x639D: "害", 0x639E: "枠", 0x639F: "揮",
    0x63A0: "次", 0x63A1: "徹", 0x63A2: "家", 0x63A3: "違", 0x63A4: "天",
    0x63A5: "済", 0x63A6: "引", 0x63A7: "甲",

    # undefined
    0x63A8: "", 0x63A9: "", 0x63AA: "", 0x63AB: "", 0x63AC: "",
    0x63AD: "", 0x63AE: "", 0x63AF: "", 0x63B0: "", 0x63B1: "",
    0x63B2: "", 0x63B3: "", 0x63B4: "", 0x63B5: "", 0x63B6: "",
    0x63B7: "", 0x63B8: "", 0x63B9: "", 0x63BA: "", 0x63BB: "",
    0x63BC: "", 0x63BD: "", 0x63BE: "", 0x63BF: "", 0x63C0: "",
    0x63C1: "", 0x63C2: "", 0x63C3: "", 0x63C4: "", 0x63C5: "",
    0x63C6: "", 0x63C7: "", 0x63C8: "", 0x63C9: "", 0x63CA: "",
    0x63CB: "", 0x63CC: "", 0x63CD: "", 0x63CE: "", 0x63CF: "",
    0x63D0: "", 0x63D1: "", 0x63D2: "", 0x63D3: "", 0x63D4: "",
    0x63D5: "", 0x63D6: "", 0x63D7: "", 0x63D8: "", 0x63D9: "",
    0x63DA: "", 0x63DB: "", 0x63DC: "", 0x63DD: "", 0x63DE: "",
    0x63DF: "", 0x63E0: "", 0x63E1: "", 0x63E2: "", 0x63E3: "",
    0x63E4: "", 0x63E5: "", 0x63E6: "", 0x63E7: "", 0x63E8: "",
    0x63E9: "", 0x63EA: "", 0x63EB: "", 0x63EC: "", 0x63ED: "",
    0x63EE: "", 0x63EF: "", 0x63F0: "", 0x63F1: "", 0x63F2: "",
    0x63F3: "", 0x63F4: "", 0x63F5: "", 0x63F6: "", 0x63F7: "",
    0x63F8: "", 0x63F9: "", 0x63FA: "", 0x63FB: "", 0x63FC: "",
    0x63FD: "", 0x63FE: "", 0x63FF: "",

    # kanji supplement
    0x6400: "々", 0x6401: "愛", 0x6402: "握", 0x6403: "位", 0x6404: "夷",
    0x6405: "尉", 0x6406: "遺", 0x6407: "域", 0x6408: "栄", 0x6409: "鋭",
    0x640A: "越", 0x640B: "黄", 0x640C: "音", 0x640D: "我", 0x640E: "改",
    0x640F: "各", 0x6410: "殻", 0x6411: "確", 0x6412: "鞄", 0x6413: "官",
    0x6414: "幹", 0x6415: "換", 0x6416: "達", 0x6417: "監", 0x6418: "丸",
    0x6419: "顔", 0x641A: "希", 0x641B: "帰", 0x641C: "記", 0x641D: "擬",
    0x641E: "議", 0x641F: "逆", 0x6420: "救", 0x6421: "求", 0x6422: "級",
    0x6423: "許", 0x6424: "共", 0x6425: "協", 0x6426: "境", 0x6427: "教",
    0x6428: "況", 0x6429: "脅", 0x642A: "興", 0x642B: "驚", 0x642C: "極",
    0x642D: "銀", 0x642E: "句", 0x642F: "区", 0x6430: "愚", 0x6431: "君",
    0x6432: "軍", 0x6433: "刑", 0x6434: "系", 0x6435: "経", 0x6436: "撃",
    0x6437: "実", 0x6438: "月", 0x6439: "件", 0x643A: "兼", 0x643B: "権",
    0x643C: "犬", 0x643D: "現", 0x643E: "言", 0x643F: "限", 0x6440: "己",
    0x6441: "故", 0x6442: "五", 0x6443: "交", 0x6444: "候", 0x6445: "公",
    0x6446: "功", 0x6447: "効", 0x6448: "厚", 0x6449: "坑", 0x644A: "好",
    0x644B: "幸", 0x644C: "攻", 0x644D: "更", 0x644E: "溝", 0x644F: "硬",
    0x6450: "考", 0x6451: "郊", 0x6452: "号", 0x6453: "国", 0x6454: "腰",
    0x6455: "困", 0x6456: "婚", 0x6457: "再", 0x6458: "採", 0x6459: "在",
    0x645A: "罪", 0x645B: "策", 0x645C: "札", 0x645D: "殺", 0x645E: "山",
    0x645F: "精", 0x6460: "酸", 0x6461: "司", 0x6462: "始", 0x6463: "思",
    0x6464: "室", 0x6465: "紫", 0x6466: "視", 0x6467: "詩", 0x6468: "試",
    0x6469: "誌", 0x646A: "式", 0x646B: "執", 0x646C: "質", 0x646D: "舎",
    0x646E: "射", 0x646F: "主", 0x6470: "守", 0x6471: "狩", 0x6472: "受",
    0x6473: "就", 0x6474: "秀", 0x6475: "習", 0x6476: "十", 0x6477: "宿",
    0x6478: "準", 0x6479: "純", 0x647A: "巡", 0x647B: "順", 0x647C: "諸",
    0x647D: "助", 0x647E: "償", 0x647F: "先", 0x6480: "召", 0x6481: "焼",
    0x6482: "詳", 0x6483: "象", 0x6484: "障", 0x6485: "常", 0x6486: "錠",
    0x6487: "殖", 0x6488: "織", 0x6489: "信", 0x648A: "心", 0x648B: "森",
    0x648C: "侵", 0x648D: "進", 0x648E: "是", 0x648F: "晴", 0x6490: "正",
    0x6491: "西", 0x6492: "誠", 0x6493: "誓", 0x6494: "静", 0x6495: "籍",
    0x6496: "責", 0x6497: "接", 0x6498: "節", 0x6499: "舌", 0x649A: "践",
    0x649B: "狙", 0x649C: "祖", 0x649D: "素", 0x649E: "組", 0x649F: "訴",
    0x64A0: "大", 0x64A1: "想", 0x64A2: "捜", 0x64A3: "相", 0x64A4: "卒",
    0x64A5: "鉄", 0x64A6: "太", 0x64A7: "駄", 0x64A8: "対", 0x64A9: "退",
    0x64AA: "第", 0x64AB: "題", 0x64AC: "択", 0x64AD: "違", 0x64AE: "単",
    0x64AF: "担", 0x64B0: "誕", 0x64B1: "団", 0x64B2: "茶", 0x64B3: "忠",
    0x64B4: "貯", 0x64B5: "兆", 0x64B6: "張", 0x64B7: "微", 0x64B8: "聴",
    0x64B9: "低", 0x64BA: "廷", 0x64BB: "敵", 0x64BC: "適", 0x64BD: "徴",
    0x64BE: "展", 0x64BF: "貼", 0x64C0: "伝", 0x64C1: "抵", 0x64C2: "踏",
    0x64C3: "同", 0x64C4: "堂", 0x64C5: "独", 0x64C6: "謎", 0x64C7: "南",
    0x64C8: "二", 0x64C9: "任", 0x64CA: "認", 0x64CB: "念", 0x64CC: "濃",
    0x64CD: "派", 0x64CE: "倍", 0x64CF: "博", 0x64D0: "迫", 0x64D1: "爆",
    0x64D2: "莫", 0x64D3: "肌", 0x64D4: "判", 0x64D5: "班", 0x64D6: "繁",
    0x64D7: "般", 0x64D8: "番", 0x64D9: "彼", 0x64DA: "比", 0x64DB: "秘",
    0x64DC: "肥", 0x64DD: "非", 0x64DE: "匹", 0x64DF: "頻", 0x64E0: "普",
    0x64E1: "封", 0x64E2: "副", 0x64E3: "払", 0x64E4: "兵", 0x64E5: "別",
    0x64E6: "編", 0x64E7: "返", 0x64E8: "補", 0x64E9: "簿", 0x64EA: "報",
    0x64EB: "宝", 0x64EC: "法", 0x64ED: "胞", 0x64EE: "亡", 0x64EF: "望",
    0x64F0: "棒", 0x64F1: "謀", 0x64F2: "北", 0x64F3: "抹", 0x64F4: "未",
    0x64F5: "密", 0x64F6: "黙", 0x64F7: "融", 0x64F8: "与", 0x64F9: "葉",
    0x64FA: "陽", 0x64FB: "欲", 0x64FC: "来", 0x64FD: "頼", 0x64FE: "雷",
    0x64FF: "覧", 0x6500: "裏", 0x6501: "離", 0x6502: "律", 0x6503: "率",
    0x6504: "硫", 0x6505: "両", 0x6506: "猟", 0x6507: "令", 0x6508: "例",
    0x6509: "隷", 0x650A: "齢", 0x650B: "録", 0x650C: "脇", 0x650D: "哺",
    0x650E: "榴", 0x650F: "炸",

    # duplicates.. ?
    0x6510: "↑", 0x6511: "↓",

    # kanji supplement
    0x6512: "選", 0x6513: "奴", 0x6514: "環", 0x6515: "結", 0x6516: "支",
    0x6517: "創", 0x6518: "産", 0x6519: "勝", 0x651A: "害", 0x651B: "枠",
    0x651C: "揮", 0x651D: "次", 0x651E: "徹", 0x651F: "家", 0x6520: "違",
    0x6521: "甲",

    # >=0x6522 = undefined
}










cp_us = {
    # space (U+0020)
    0x47: " ",

    # hiragana
    #        a             i             u             e             o
    0x48:   "あ", 0x49:   "い", 0x4A:   "う", 0x4B:   "え", 0x4C:   "お", # /
    0x4D:   "か", 0x4E:   "き", 0x4F:   "く", 0x50:   "け", 0x51:   "こ", # k
    0x52:   "さ", 0x53:   "し", 0x54:   "す", 0x55:   "せ", 0x56:   "そ", # s
    0x57:   "た", 0x58:   "ち", 0x59:   "つ", 0x5A:   "て", 0x5B:   "と", # t
    0x5C:   "な", 0x5D:   "に", 0x5E:   "ぬ", 0x5F:   "ね", 0x6000: "の", # n
    0x6001: "は", 0x6002: "ひ", 0x6003: "ふ", 0x6004: "へ", 0x6005: "ほ", # h
    0x6006: "ま", 0x6007: "み", 0x6008: "む", 0x6009: "め", 0x600A: "も", # m
    0x600B: "や",               0x600C: "ゆ",               0x600D: "よ", # y
    0x600E: "ら", 0x600F: "り", 0x6010: "る", 0x6011: "れ", 0x6012: "ろ", # r
    0x6013: "わ",                                           0x6014: "を", # w
    0x6015: "ん",                                                         # "n"
    0x6016: "が", 0x6017: "ぎ", 0x6018: "ぐ", 0x6019: "げ", 0x601A: "ご", # g
    0x601B: "ざ", 0x601C: "じ", 0x601D: "ず", 0x601E: "ぜ", 0x601F: "ぞ", # z
    0x6020: "だ", 0x6021: "ぢ", 0x6022: "づ", 0x6023: "で", 0x6024: "ど", # d
    0x6025: "ば", 0x6026: "び", 0x6027: "ぶ", 0x6028: "べ", 0x6029: "ぼ", # b
    0x602A: "ぱ", 0x602B: "ぴ", 0x602C: "ぷ", 0x602D: "ぺ", 0x602E: "ぽ", # p

    # small hiragana
    0x602F: "ぁ", 0x6030: "ぃ", 0x6031: "ぅ", 0x6032: "ぇ", 0x6033: "ぉ",
                                0x6034: "っ",
    0x6035: "ゃ",               0x6036: "ゅ",               0x6037: "ょ",

    # kanji
    0x6038: "築", 0x6039: "週", 0x603A: "爪", 0x603B: "痕", 0x603C: "至",
    0x603D: "台", 0x603E: "資", 0x603F: "闇", 0x6040: "息", 0x6041: "速",
    0x6042: "途", 0x6043: "襲", 0x6044: "図", 0x6045: "計", 0x6046: "洗",

    # punctuation
    0x6047: ";",

    # undefined
    0x6048: "", 0x6049: "", 0x604A: "", 0x604B: "", 0x604C: "",
    0x604D: "", 0x604E: "", 0x604F: "", 0x6050: "", 0x6051: "",
    0x6052: "", 0x6053: "", 0x6054: "", 0x6055: "", 0x6056: "",
    0x6057: "", 0x6058: "",

    # fullwidth/spaced digits? standard for now
    0x6059: "0", 0x605A: "1", 0x605B: "2", 0x605C: "3", 0x605D: "4",
    0x605E: "5", 0x605F: "6", 0x6060: "7", 0x6061: "8", 0x6062: "9",

    # fullwidth/spaced uppercase letters? standard for now
    0x6063: "A", 0x6064: "B", 0x6065: "C", 0x6066: "D", 0x6067: "E",
    0x6068: "F", 0x6069: "G", 0x606A: "H", 0x606B: "I", 0x606C: "J",
    0x606D: "K", 0x606E: "L", 0x606F: "M", 0x6070: "N", 0x6071: "O",
    0x6072: "P", 0x6073: "Q", 0x6074: "R", 0x6075: "S", 0x6076: "T",
    0x6077: "U", 0x6078: "V", 0x6079: "W", 0x607A: "X", 0x607B: "Y",
    0x607C: "Z",

    # fullwidth/spaced lowercase letters? standard for now
    0x607D: "a", 0x607E: "b", 0x607F: "c", 0x6080: "d", 0x6081: "e",
    0x6082: "f", 0x6083: "g", 0x6084: "h", 0x6085: "i", 0x6086: "j",
    0x6087: "k", 0x6088: "l", 0x6089: "m", 0x608A: "n", 0x608B: "o",
    0x608C: "p", 0x608D: "q", 0x608E: "r", 0x608F: "s", 0x6090: "t",
    0x6091: "u", 0x6092: "v", 0x6093: "w", 0x6094: "x", 0x6095: "y",
    0x6096: "z",

    # em space
    0x6097: " ",

    # (part of) hiragana.. again?
    0x6098: "あ", 0x6099: "い", 0x609A: "う", 0x609B: "え", 0x609C: "お",
    0x609D: "か", 0x609E: "き", 0x609F: "く", 0x60A0: "け", 0x60A1: "こ",
    0x60A2: "さ", 0x60A3: "し", 0x60A4: "す", 0x60A5: "せ", 0x60A6: "そ",
    0x60A7: "た",

    # katakana
    #        a             i             u             e             o
    0x60A8: "ア", 0x60A9: "イ", 0x60AA: "ウ", 0x60AB: "エ", 0x60AC: "オ", # /
    0x60AD: "カ", 0x60AE: "キ", 0x60AF: "ク", 0x60B0: "ケ", 0x60B1: "コ", # k
    0x60B2: "サ", 0x60B3: "シ", 0x60B4: "ス", 0x60B5: "セ", 0x60B6: "ソ", # s
    0x60B7: "タ", 0x60B8: "チ", 0x60B9: "ツ", 0x60BA: "テ", 0x60BB: "ト", # t
    0x60BC: "ナ", 0x60BD: "ニ", 0x60BE: "ヌ", 0x60BF: "ネ", 0x60C0: "ノ", # n
    0x60C1: "ハ", 0x60C2: "ヒ", 0x60C3: "フ", 0x60C4: "ヘ", 0x60C5: "ホ", # h
    0x60C6: "マ", 0x60C7: "ミ", 0x60C8: "ム", 0x60C9: "メ", 0x60CA: "モ", # m
    0x60CB: "ヤ",               0x60CC: "ユ",               0x60CD: "ヨ", # y
    0x60CE: "ラ", 0x60CF: "リ", 0x60D0: "ル", 0x60D1: "レ", 0x60D2: "ロ", # r
    0x60D3: "ワ",                                           0x60D4: "ヲ", # w
    0x60D5: "ン",                                                         # "n"
    0x60D6: "ガ", 0x60D7: "ギ", 0x60D8: "グ", 0x60D9: "ゲ", 0x60DA: "ゴ", # g
    0x60DB: "ザ", 0x60DC: "ジ", 0x60DD: "ズ", 0x60DE: "ゼ", 0x60DF: "ゾ", # z
    0x60E0: "ダ", 0x60E1: "ヂ", 0x60E2: "ヅ", 0x60E3: "デ", 0x60E4: "ド", # d
    0x60E5: "バ", 0x60E6: "ビ", 0x60E7: "ブ", 0x60E8: "ベ", 0x60E9: "ボ", # b
    0x60EA: "パ", 0x60EB: "ピ", 0x60EC: "プ", 0x60ED: "ペ", 0x60EE: "ポ", # p
    0x60EF: "ヴ",                                                         # v

    # small katakana
    0x60F0: "ァ", 0x60F1: "ィ", 0x60F2: "ゥ", 0x60F3: "ェ", 0x60F4: "ォ",
                                0x60F5: "ッ",
    0x60F6: "ャ",               0x60F7: "ュ",               0x60F8: "ョ",

    # punctuation supplement
    0x60F9: "ー", 0x60FA: "S.", 0x60FB: "T.", 0x60FC: "A.", 0x60FD: "R.",
    0x60FE: "±",  0x60FF: "℃",  0x6100: "+",  0x6101: "=",  0x6102: ".", 
    0x6103: "←",  0x6104: "→",  0x6105: "、", 0x6106: "。", 0x6107: "・",
    0x6108: "…",  0x6109: ":",  0x610A: "!",  0x610B: "?",  0x610C: "(", 
    0x610D: ")",  0x610E: "「", 0x610F: "」", 0x6110: "『", 0x6111: "』",
    0x6112: "〇", 0x6113: "ー", 0x6114: "-",  0x6115: "”",  0x6116: "“", 
    0x6117: "☓",  0x6118: "/",  0x6119: "ʼ",  0x611A: ",",  0x611B: "▼", 
    0x611C: "▶",  0x611D: "▲",  0x611E: "※",

    # kanji supplement
    0x611F: "明", 0x6120: "続", 0x6121: "場", 0x6122: "合", 0x6123: "開",
    0x6124: "",   0x6125: "",   0x6126: "",   0x6127: "",   0x6128: "扱",
    0x6129: "押", 0x612A: "源", 0x612B: "指", 0x612C: "示", 0x612D: "取",
    0x612E: "従", 0x612F: "書", 0x6130: "生", 0x6131: "説", 0x6132: "体",
    0x6133: "電", 0x6134: "読", 0x6135: "発", 0x6136: "閉", 0x6137: "本",

    # punctuation supplement
    0x6138: "↑", 0x6139: "↓",

    # duplicates (fullwidth / spaced versions? standard for now)
    0x613A: "",   0x613B: "",   0x613C: "",   0x613D: "",   0x613E: "",
    0x613F: "",   0x6140: "",   0x6141: "",   0x6142: "",   0x6143: "",
    0x6144: "",   0x6145: "",   0x6146: "",   0x6147: "",   0x6148: "",
    0x6149: "",   0x614A: "",   0x614B: "",   0x614C: "",   0x614D: "",
    0x614E: "",   0x614F: "",   0x6150: "",   0x6151: "",   0x6152: "",
    0x6153: "",   0x6154: "",   0x6155: "",   0x6156: "",   0x6157: "",
    0x6158: "ア", 0x6159: "イ", 0x615A: "ウ", 0x615B: "エ", 0x615C: "オ",
    0x615D: "カ", 0x615E: "キ", 0x615F: "ク", 0x6160: "ケ", 0x6161: "コ",
    0x6162: "サ", 0x6163: "シ", 0x6164: "ス", 0x6165: "セ", 0x6166: "ソ",
    0x6167: "タ", 0x6168: "チ", 0x6169: "ツ", 0x616A: "テ", 0x616B: "ト",
    0x616C: "ナ", 0x616D: "ニ", 0x616E: "ヌ", 0x616F: "ネ", 0x6170: "ノ",
    0x6171: "ハ", 0x6172: "ヒ", 0x6173: "フ", 0x6174: "ヘ", 0x6175: "ホ",
    0x6176: "マ", 0x6177: "ミ", 0x6178: "ム", 0x6179: "メ", 0x617A: "モ",
    0x617B: "ヤ", 0x617C: "ユ", 0x617D: "ヨ", 0x617E: "ラ", 0x617F: "リ",
    0x6180: "ル", 0x6181: "レ", 0x6182: "ロ", 0x6183: "ワ", 0x6184: "ヲ",
    0x6185: "ン", 0x6186: "ガ", 0x6187: "ギ", 0x6188: "グ", 0x6189: "ゲ",
    0x618A: "ゴ", 0x618B: "ザ", 0x618C: "ジ", 0x618D: "ズ", 0x618E: "ゼ",
    0x618F: "ゾ", 0x6190: "ダ", 0x6191: "ヂ", 0x6192: "ヅ", 0x6193: "デ",
    0x6194: "ド", 0x6195: "バ", 0x6196: "ビ", 0x6197: "ブ", 0x6198: "ベ",
    0x6199: "ボ", 0x619A: "パ", 0x619B: "ピ", 0x619C: "プ", 0x619D: "ペ",
    0x619E: "ポ", 0x619F: "ヴ", 0x61A0: "ァ", 0x61A1: "ィ", 0x61A2: "ゥ",
    0x61A3: "ェ", 0x61A4: "ォ", 0x61A5: "ッ", 0x61A6: "ャ", 0x61A7: "ュ",
    0x61A8: "ち", 0x61A9: "つ", 0x61AA: "て", 0x61AB: "と", 0x61AC: "な",
    0x61AD: "に", 0x61AE: "ぬ", 0x61AF: "ね", 0x61B0: "の", 0x61B1: "は",
    0x61B2: "ひ", 0x61B3: "ふ", 0x61B4: "へ", 0x61B5: "ほ", 0x61B6: "ま",
    0x61B7: "み", 0x61B8: "む", 0x61B9: "め", 0x61BA: "も", 0x61BB: "や",
    0x61BC: "ゆ", 0x61BD: "よ", 0x61BE: "ら", 0x61BF: "り", 0x61C0: "る",
    0x61C1: "れ", 0x61C2: "ろ", 0x61C3: "わ", 0x61C4: "を", 0x61C5: "ん",
    0x61C6: "が", 0x61C7: "ぎ", 0x61C8: "ぐ", 0x61C9: "げ", 0x61CA: "ご",
    0x61CB: "ざ", 0x61CC: "じ", 0x61CD: "ず", 0x61CE: "ぜ", 0x61CF: "ぞ",
    0x61D0: "だ", 0x61D1: "ぢ", 0x61D2: "づ", 0x61D3: "で", 0x61D4: "ど",
    0x61D5: "ば", 0x61D6: "び", 0x61D7: "ぶ", 0x61D8: "べ", 0x61D9: "ぼ",
    0x61DA: "ぱ", 0x61DB: "ぴ", 0x61DC: "ぷ", 0x61DD: "ぺ", 0x61DE: "ぽ",
    0x61DF: "ぁ", 0x61E0: "ぃ", 0x61E1: "ぅ", 0x61E2: "ぇ", 0x61E3: "ぉ",
    0x61E4: "っ", 0x61E5: "ゃ", 0x61E6: "ゅ", 0x61E7: "ょ", 0x61E8: "築",
    0x61E9: "週", 0x61EA: "爪", 0x61EB: "痕", 0x61EC: "至", 0x61ED: "台",
    0x61EE: "資", 0x61EF: "闇", 0x61F0: "息", 0x61F1: "速", 0x61F2: "途",
    0x61F3: "襲", 0x61F4: "図", 0x61F5: "計", 0x61F6: "洗", 0x61F7: ";",
    0x61F8: "",   0x61F9: "",   0x61FA: "",   0x61FB: "",   0x61FC: "",
    0x61FD: "",   0x61FE: "",   0x61FF: "",   0x6200: "",   0x6201: "",
    0x6202: "",   0x6203: "",   0x6204: "",   0x6205: "",   0x6206: "",
    0x6207: "",   0x6208: "",   0x6209: "",   0x620A: "",   0x620B: "",
    0x620C: "",   0x620D: "",   0x620E: "",   0x620F: "",   0x6210: "",
    0x6211: "",   0x6212: "",   0x6213: "",   0x6214: "",   0x6215: "",
    0x6216: "",   0x6217: "",   0x6218: "",   0x6219: "",   0x621A: "",
    0x621B: "",   0x621C: "",   0x621D: "",   0x621E: "",   0x621F: "",
    0x6220: "",   0x6221: "",   0x6222: "",   0x6223: "",   0x6224: "",
    0x6225: "",   0x6226: "",   0x6227: "",   0x6228: "",   0x6229: "",
    0x622A: "",   0x622B: "",   0x622C: "",   0x622D: "",   0x622E: "",
    0x622F: "",   0x6230: "",   0x6231: "",   0x6232: "",   0x6233: "",
    0x6234: "",   0x6235: "",   0x6236: "",   0x6237: "",   0x6238: "",
    0x6239: "",   0x623A: "",   0x623B: "",   0x623C: "",   0x623D: "",
    0x623E: "",   0x623F: "",   0x6240: "",   0x6241: "",   0x6242: "",
    0x6243: "",   0x6244: "",   0x6245: "",   0x6246: "",   0x6247: "",
    0x6248: "",   0x6249: "",   0x624A: "",   0x624B: "",   0x624C: "",
    0x624D: "",   0x624E: "",   0x624F: "",   0x6250: "",   0x6251: "",
    0x6252: "",   0x6253: "",   0x6254: "",   0x6255: "",   0x6256: "",
    0x6257: "",   0x6258: "",   0x6259: "",   0x625A: "",   0x625B: "",
    0x625C: "",   0x625D: "",   0x625E: "",   0x625F: "",   0x6260: "",
    0x6261: "",   0x6262: "",   0x6263: "",   0x6264: "",   0x6265: "",
    0x6266: "",   0x6267: "",   0x6268: "",   0x6269: "",   0x626A: "",
    0x626B: "",   0x626C: "",   0x626D: "",   0x626E: "",   0x626F: "",
    0x6270: "",   0x6271: "",   0x6272: "",   0x6273: "",   0x6274: "",
    0x6275: "",   0x6276: "",   0x6277: "",   0x6278: "",   0x6279: "",
    0x627A: "",   0x627B: "",   0x627C: "",   0x627D: "",   0x627E: "",
    0x627F: "",   0x6280: "",   0x6281: "",   0x6282: "",   0x6283: "",
    0x6284: "",   0x6285: "",   0x6286: "",   0x6287: "",   0x6288: "",
    0x6289: "",   0x628A: "",   0x628B: "",   0x628C: "",   0x628D: "",
    0x628E: "",   0x628F: "",   0x6290: "",   0x6291: "",   0x6292: "",
    0x6293: "",   0x6294: "",   0x6295: "",   0x6296: "",   0x6297: "",
    0x6298: "",   0x6299: "",   0x629A: "",   0x629B: "",   0x629C: "",
    0x629D: "",   0x629E: "",   0x629F: "",   0x62A0: "",   0x62A1: "",
    0x62A2: "",   0x62A3: "",   0x62A4: "",   0x62A5: "",   0x62A6: "",
    0x62A7: "",   0x62A8: "ョ", 0x62A9: "ー", 0x62AA: "S.", 0x62AB: "T.",
    0x62AC: "A.", 0x62AD: "R.", 0x62AE: "±",  0x62AF: "℃",  0x62B0: "+",
    0x62B1: "=",  0x62B2: ".",  0x62B3: "←",  0x62B4: "→",  0x62B5: "、",
    0x62B6: "。", 0x62B7: "・", 0x62B8: "…",  0x62B9: ":",  0x62BA: "!",
    0x62BB: "?",  0x62BC: "(",  0x62BD: ")",  0x62BE: "「", 0x62BF: "」",
    0x62C0: "『", 0x62C1: "』", 0x62C2: "〇", 0x62C3: "ー", 0x62C4: "-",
    0x62C5: "”",  0x62C6: "“",  0x62C7: "☓",  0x62C8: "/",  0x62C9: "'",
    0x62CA: ",",  0x62CB: "▼",  0x62CC: "▶",  0x62CD: "▲",  0x62CE: "※",
    0x62CF: "明", 0x62D0: "続", 0x62D1: "場", 0x62D2: "合", 0x62D3: "開",
    0x62D4: "",   0x62D5: "",   0x62D6: "",   0x62D7: "",   0x62D8: "扱",
    0x62D9: "押", 0x62DA: "源", 0x62DB: "指", 0x62DC: "示", 0x62DD: "取",
    0x62DE: "従", 0x62DF: "書", 0x62E0: "生", 0x62E1: "説", 0x62E2: "体",
    0x62E3: "電", 0x62E4: "読", 0x62E5: "発", 0x62E6: "閉", 0x62E7: "本",
    0x62E8: "↑",  0x62E9: "↓",

    # 62EA -> 6801 = undefined
    # >= 6802 = Dolphin crashes
}










def convert_cp(text, offset, version, verbose):
    cp = text[offset]
    done = 0
    char = ''

    if cp <= 0x01:
        char = cp_all[cp]

    elif cp == 0x02:
        if verbose: print("Skipped selection prompt modifier (0x02) at 0x%X" % offset)

    elif cp == 0x03:
        if verbose: print("Skipped color terminator (0x03) at 0x%X" % offset)

    elif cp == 0x04:
        if verbose: print("Skipped color modifier (0x04xx) at 0x%X" % offset)
        done += 1

    elif cp == 0x05:
        if verbose: print("Skipped option modifier (0x05) at 0x%X" % offset)

    elif cp == 0x06:
        if verbose: print("Skipped text-continuation modifier (0x06) at 0x%X" % offset)

    elif cp == 0x07:
        if verbose: print("Skipped text-justification (0x07xx) at 0x%X" % offset)
        done += 1

    elif cp >= 0x08 and cp <= 0x46:
        char = cp_all[cp]

    elif cp >= 0x47 and cp <= 0x5F:
        if version == "t":
            char = cp_trial[cp]
        elif version == "j":
            char = cp_jp[cp]
        elif version == "u":
            char = cp_us[cp]

    elif cp >= 0x60:
        if offset+1 < len(text):
            cp = (cp<<8) + text[offset+1]
            supported = True
            if version == "t" and cp in cp_trial:
                char = cp_trial[cp]
            elif version == "j" and cp in cp_jp:
                char = cp_jp[cp]
            elif version == "u" and cp in cp_us:
                char = cp_us[cp]
            else:
                supported = False
                print("NOTICE: Found an unsupported codepoint (0x%04X) at 0x%X" % (cp, offset))

            if supported and char == "":
                print("NOTICE: Possible faulty conversion at 0x%X (codepoint 0x%04X)" % (offset, cp))

            done += 1
        else:
            print("NOTICE: Reached end of text with missing byte for codepoint 0x%02X" % cp)

    done += 1

    return [done, char]

def main(argc=len(sys.argv), argv=sys.argv):
    if argc < 4 or argc > 6:
        print("Usage: " + argv[0] + " [options] <version> <input> <output>")
        print()
        print("Version must be one of:")
        print("   t: trial edition (JP)")
        print("   j: final release (JP)")
        print("   u: final release (US)")
        print()
        print("Options:")
        print("   -h: implies <input> contains a string offset header")
        print("   -v: verbose output (shows skipped modifiers)")
        return -1

    version = argv[-3].lower()
    path_in = argv[-2]
    path_out = argv[-1]

    if version not in ["t", "j", "u"]:
        print("ERROR: \"" + version + "\" is not a valid version")
        return 1

    if os.path.isfile(path_in) is not True:
        print("ERROR: Invalid input path.")
        return 1

    header = False
    verbose = False
    argn = argc-4
    while argn > 0:
        if argv[argn] == "-h":
            header = True
        elif argv[argn] == "-v":
            verbose = True
        argn -= 1

    with open(path_in, "rb") as f: text = f.read()

    offset = 0
    output = ''

    if header:
        if len(text) < 4:
            print("ERROR: No header in this file?")
            return 1

        if struct.unpack('>I', text[0:4])[0] and len(text) >= 8:
            offset = struct.unpack('>I', text[4:8])[0]
            if offset > len(text):
                print("ERROR: Offset(s) from header out of range!")
                return 1
        else:
            offset = len(text)
    
    while offset < len(text):
        done, char = convert_cp(text, offset, version, verbose)
        offset += done
        output += char

    try:
        output = output.encode("utf-8", "strict")
    except UnicodeError:
        print("ERROR: Failed encoding output to UTF-8, exiting.")
        return 1

    with open(path_out, "wb") as f: f.write(output)

    print("Successfully wrote converted text.")

    return 0

if __name__ == "__main__":
    main()
